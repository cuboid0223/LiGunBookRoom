{% extends 'main/base.html' %}
{% block title %}article{% endblock %}
{% load static %}
{% block css%}
<link rel="stylesheet" href="{% static 'article/css/article.css' %}">
{% endblock %}
{% block heading %}Article{% endblock %}


{% block content %}
{% include 'article/searchForm.html' %}
<p><a class="btn" href="{% url 'article:articleCreate' %}">新增文章</a></p>
{% for article,comments in articles.items %}

    <h3>
        <a href="{% url 'article:articleRead' article.id %}">
            {{ article.title }}
        </a>
    </h3>

    <form class="delbtn" method="POST" action="{% url 'article:articleDelete' article.id %}">
        {% csrf_token %}
        <input class="btn deleteConfirm " type="submit" value="刪除">
    </form>

    <pre>發表時間：{{ article.pubDateTime| date:'Y-m-d H:i' }}</pre>
    <div class='articleContent'>{{ article.content|linebreaks|truncatechars_html:30 }}</div>
    
    {% for comment in comments %}
    <div class="commentDiv">
        <span class='comment'>{{ comment.content }}</span>
        <br>
        <span class='commentTime'>{{ comment.pubDateTime|date:'m月d日 H:i' }}</span>
    </div>
    {% endfor %}
    <hr>
{% endfor %}
{% endblock %}

{% block script %}
    <script src='{% static "main/js/deleteConfirm.js" %}'></script>
{% endblock %}