{% extends 'main/base.html' %}
{% load static %}
{% block css %}
    <link rel='stylesheet' href="{% static 'article/css/article.css' %}">
{% endblock %}
{% block heading %}閱讀文章{% endblock %}

{% block content %}

    <h3>{{ article.title }}</h3>
    {% if user.is_superuser %}
        <a class='btn inlineBlock' href="{% url 'article:articleUpdate' article.id %}">修改</a>
    {% endif %}
    <p>發表時間：{{ article.pubDateTime|date:'Y-m-d H:i' }}</p>
    <div class="articleContent">{{ article.content|linebreaks }}</div>

    <!-- 愛心 -->
    <p class="like">
        {% if user.is_authenticated %}
        <a href="{% url 'article:articleLike' article.id %}">
            <i id="like" class="fas fa-heart"></i>
        </a>
        {{ article.likes.count }}
        {% endif %}
    </p>


     <!-- 留言區 -->
    {% for comment in comments %}
        <div class="commentDiv">
            <span class="commentAuthor" >{{ comment.user.fullName }}:</span>
            <br>
            <span class="comment">{{ comment.content }}</span>
            <br>
            <span>發表時間：{{ article.pubDateTime|date:'Y-m-d H:i' }}</span>
        </div>
    {% endfor %}


    <!-- 留言框 -->
    {% if user.is_authenticated %}
        <br>
        <form method="post" action="{% url 'article:commentCreate' article.id %}">
            {% csrf_token %}
            <input type="text" name="comment" placeholder="留言">
            <input class="btn" type="submit" value="送出">
        </form>
        <br><br>
    {% endif %}

{% endblock %}